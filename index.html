<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Manager</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="header-left">
      <h1>Daily Manager</h1>
      <div class="subtitle timezone-picker" id="timezonePicker">
        <button
          id="timezoneButton"
          type="button"
          class="timezone-btn"
          aria-haspopup="listbox"
          aria-expanded="false"
          aria-controls="timezoneMenu"
        >
          Europe/London
        </button>
        <ul id="timezoneMenu" class="timezone-menu" role="listbox" hidden>
          <li role="option" data-value="Europe/London" tabindex="0">Europe/London</li>
          <li role="option" data-value="Asia/Shanghai" tabindex="0">China</li>
        </ul>
      </div>
    </div>
    <div class="header-right">
      <button id="themeToggle" class="icon-btn" aria-label="Toggle theme" title="Toggle theme (T)">
        <span class="icon">ðŸŒ—</span>
      </button>
    </div>
  </header>

  <main class="layout">
    <section class="calendar-panel" aria-label="Calendar">
      <div class="calendar-nav">
        <button id="prevPeriod" class="btn" type="button" aria-label="Previous month">â—€</button>
        <div id="calendarLabel" aria-live="polite"></div>
        <button id="nextPeriod" class="btn" type="button" aria-label="Next month">â–¶</button>
      </div>
      <div id="calendarGrid" class="calendar-grid" role="grid"></div>
    </section>

    <section class="day-panel" aria-label="Selected day details">
      <div class="day-header">
        <div>
          <h2 id="selectedDateLabel"></h2>
        </div>
      </div>

      <section class="todo-section" aria-labelledby="todoHeading">
        <div class="section-header simple">
          <h3 id="todoHeading">Todos</h3>
          <button id="newTodoBtn" class="circle-btn" type="button" title="New todo (N)" aria-label="New todo">ï¼‹</button>
        </div>
        <form id="todoForm" class="card inline-form" aria-label="Create or edit todo" hidden>
          <div class="form-row">
            <input id="todoTitle" name="title" type="text" placeholder="Todo title" required />
          </div>
          <textarea
            id="todoNote"
            class="auto-resize"
            name="note"
            rows="1"
            placeholder="Notes (Enter to save, Esc to cancel)"
          ></textarea>
          <div class="form-actions">
            <button type="submit" class="btn primary">Save Todo</button>
            <button type="button" id="cancelTodo" class="btn ghost">Cancel</button>
          </div>
        </form>
        <ul id="todoList" class="todo-list" aria-live="polite"></ul>
      </section>

      <section class="journal-section" aria-labelledby="journalHeading">
        <div class="section-header simple">
          <h3 id="journalHeading">Activities</h3>
          <button id="newJournalBtn" class="circle-btn" type="button" title="New journal entry (J)" aria-label="New journal entry">ï¼‹</button>
        </div>
        <form id="journalForm" class="card quick-entry inline-form" aria-label="Create or edit journal entry" hidden>
          <div class="form-row">
            <input id="journalDate" type="date" required />
            <input id="journalTime" type="time" required />
            <input id="journalTags" type="text" placeholder="Tags (space or comma separated)" />
          </div>
          <textarea
            id="journalContent"
            class="auto-resize"
            rows="1"
            placeholder="Record today (Enter to save, Shift+Enter for newline)"
            required
          ></textarea>
          <div class="form-actions">
            <button type="submit" class="btn primary">Save Entry</button>
            <button type="button" id="cancelJournal" class="btn ghost">Cancel</button>
          </div>
        </form>
        <ol id="journalTimeline" class="journal-timeline" aria-live="polite"></ol>
      </section>

    </section>
  </main>

  <section class="log-board" aria-labelledby="logHeading">
    <div class="log-board-inner">
      <div class="section-header simple">
        <h3 id="logHeading">Research Logs</h3>
        <button id="newLogBtn" class="circle-btn" type="button" title="New research log (L)" aria-label="New research log">ï¼‹</button>
      </div>
      <form id="logForm" class="card research-form inline-form" aria-label="Create or edit research log" hidden>
        <div class="form-row">
          <input id="logTitle" name="title" type="text" placeholder="Log title" required />
        </div>
        <textarea
          id="logDescription"
          class="auto-resize"
          name="description"
          rows="1"
          placeholder="Overview or context"
        ></textarea>
        <textarea
          id="logResults"
          class="auto-resize"
          name="results"
          rows="1"
          placeholder="Results or observations"
        ></textarea>
        <div class="log-steps">
          <div class="steps-header">
            <h4>Operations</h4>
            <button type="button" id="addLogStep" class="text-btn">Add step</button>
          </div>
          <div id="logStepsContainer" class="log-steps-container"></div>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn primary">Save Log</button>
          <button type="button" id="cancelLog" class="btn ghost">Cancel</button>
        </div>
      </form>
      <ol id="logList" class="log-list" aria-live="polite"></ol>
    </div>
  </section>

  <section class="export-panel" aria-label="Export data">
    <h3>Export</h3>
    <div class="export-card export-combined">
      <div class="export-row">
        <div class="export-field">
          <label for="exportDateFrom">Start date</label>
          <input id="exportDateFrom" type="date" />
        </div>
        <div class="export-field">
          <label for="exportDateTo">End date</label>
          <input id="exportDateTo" type="date" />
        </div>
      </div>
      <div class="export-actions">
        <button id="exportJournalTxt" class="btn" type="button">Export journal TXT</button>
        <button id="exportTodosTxtRange" class="btn" type="button">Export todo TXT</button>
        <button id="exportLogsTxt" class="btn" type="button">Export research log TXT</button>
      </div>
    </div>
  </section>

  <template id="todoItemTemplate">
    <li class="todo-item" draggable="true">
      <div class="item-main">
        <label class="item-checkbox">
          <input type="checkbox" class="todo-done" />
          <span aria-hidden="true"></span>
        </label>
        <div class="item-content">
          <div class="item-title todo-title"></div>
          <div class="item-meta todo-meta"></div>
        </div>
      </div>
      <div class="item-actions" role="group" aria-label="Todo actions">
        <button class="icon-action up" type="button" title="Move up">â†‘</button>
        <button class="icon-action down" type="button" title="Move down">â†“</button>
        <button class="icon-action edit" type="button" title="Edit">âœŽ</button>
        <button class="icon-action delete" type="button" title="Delete">âœ•</button>
      </div>
    </li>
  </template>

  <template id="journalItemTemplate">
    <li class="journal-item">
      <div class="item-main">
        <div class="journal-bullet" aria-hidden="true"></div>
        <div class="item-content">
          <div class="item-title journal-content"></div>
          <div class="item-meta journal-meta"></div>
        </div>
      </div>
      <div class="item-actions" role="group" aria-label="Journal actions">
        <button class="icon-action edit" type="button" title="Edit">âœŽ</button>
        <button class="icon-action delete" type="button" title="Delete">âœ•</button>
      </div>
    </li>
  </template>

  <template id="logItemTemplate">
    <li class="log-item">
      <div class="item-main">
        <div class="item-content">
          <div class="item-title log-title"></div>
          <div class="item-meta log-meta"></div>
          <div class="log-description"></div>
          <div class="log-results"></div>
          <ul class="log-operations"></ul>
        </div>
      </div>
      <div class="item-actions" role="group" aria-label="Research log actions">
        <button class="icon-action edit" type="button" title="Edit">âœŽ</button>
        <button class="icon-action delete" type="button" title="Delete">âœ•</button>
      </div>
    </li>
  </template>

  <div id="toast" role="status" aria-live="assertive"></div>

  <script src="app.js" defer></script>
</body>
</html>
